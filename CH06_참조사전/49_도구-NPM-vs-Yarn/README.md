## NPM vs Yarn

---

```
1. Yarn
2. npm CLI
3. yarn command
```
<br />

### Yarn

node.js가 나오고 나서 node.js로 만든,<br />
즉, 자바스크립트로 개발된 소프트웨어를 등록하고 언제든지 편리하게 다운로드하고,<br />
업데이트할 수 있는 (버전을 관리할 수 있는) 소프트웨어로 등장을 했었다.

굉장히 각광받는 소프트웨어고, 지금도 굉장히 광범위하게 쓰이고 있는 애플리케이션이지만,<br />
자바스크립트 생태계 초기에 만들어진 애플리케이션이기 때문에 설치된 애플리케이션의 구조나<br />
전체적인 틀이 자바스크립트로 애플리케이션을 개발할 때 '볼륨이 이렇게 거대해질지는 미처 예상하지 못한 측면들'이 있다.<br />
그래서 NPM으로 설치된 패키지들이 좀 방만하게 운영되기도 하고, 속도도 느리고,<br />
하는 부분들이 있기 때문에 대안으로 나온 것이 페이스북에서 만든 바로 'Yarn'이라고 하는 패키지 매니저이다.

실제로 2가지 소프트웨어는 서로 경쟁을 하면서 발전을 하고 있고,<br />
사용법은 다르지만 하는 일은 거의 똑같다고 생각을 하면 된다.

<br />

### npm의 CLI commands

사용 측면의 npm.

[CLI commands](https://docs.npmjs.com/cli/v8/commands)

`npm init`, `npm install`, `npm uninstall`, `npm update`, ... 정도가 우리가 사용하는 주요한 명령어들...

- 🤔 "왜 이렇게 엄청나게 많은 command가 많을까?"<br />

  실제로 npm command는 npm에 있는 패키지를 찾고, 다운로드하고, 업데이트하는 것뿐만 아니라<br />
  내가 npm에 등록할 애플리케이션을 위해서도 사용되는 소프트웨어기 때문에<br />
  실제로 등록하는 절차와 관련해서는 꽤 많은 기능들이 필요하다.<br />
  (user 등록, 애플리케이션 정보, 등록한 애플리케이션을 유지/보수 해야 할 때 어떻게 release할 것인가, 어떻게 deploy할 것인가, 나 혼자 개발하는건지 여러명이 개발하는건지 등등...)

  나중에 개발를 위한 소프트웨어를 개발할 일이 있다고 하면,<br />
  npm 문서를 참조해서 어떻게 npm에 등록하는지 확인해볼 수 있다. :)

<br />

### yarn command

기본적으로 npm에서 제공하는 모든 기능을 다 제공하진 않지만,<br />
개발자들이 npm에서 사용할 때 많이 사용하는 기능들은 yarn이 다 제공하고 있다.

- 🤔 "그럼 npm이랑 뭐가 다를까?"<br />
  - 속도가 훨씬 빠르다.<br />
  - npm과 똑같은 작업을 했을 때 훨씬 더 빠르게 install되고 update된다는 걸 확인할 수 있다.

- 🤔 "어떻게 그렇게 만들었을까?"<br />
  ① Parallel installation of packages, packages 병렬 설치<br />
  패키지가 설치되면 일련의 작업을 수행한다. NPM에서 여러 패키지를 설치할 때, <br />
  패키지가 완전히 설치 될 때까지 기다린 후 다른 패키지를 설치한다.<br />
  즉, 작업은 패키지별로 순차적으로 실행된다.

  하지만 YARN은 이러한 작업을 병렬로 설치하므로 퍼포먼스와 속도가 증가한다.

  React를 설치했을 때, NPM과 YARN의 속도 차이는 이렇다

  NPM — 3.572 seconds<br />
  YARN — 1.44 seconds

  YARN이 현저하게 속도가 빠른 것을 알 수 있다.

  ② Automatic Lock file generation, 자동 lock 파일 생성<br />
  NPM과 YARN 모두 패키지에서 프로젝트의 종속성과 버전 번호를 추적한다. <br />
  json 파일 종속성을 설치할 때마다 종속성 버전이 버전 번호 앞에 ^로 시작될 수 있다. <br />
  즉, 다른 시스템에 모든 패키지를 설치하거나 설치할 명령을 수동으로 실행할 때마다 패키지 관리자가 릴리스된 최신 버전을 찾는다. <br />
  최신 버전이 있는 경우 패키지 파일에 언급된 버전이 아닌 자동으로 설치된다. <br />
  패키지를 자동으로 변경하지 않으려면 두 가지 방법이 있다. <br />
  하나는 잠금 파일을 생성하여 한 번에 특정 버전만 설치되고 다른 하나는 패키지 파일에 ^을 제거하는 것이다.<br />
  종속성이 추가되면 YARN은 yarn.lock 파일을 자동으로 추가한다. NPM은 npm shrinkwrap 명령어로 lock 파일을 생성한다.<br />
  차이점은 NPM이 기본적으로 lock 파일을 생성하지 않을 때, YARN은 항상 yarn.lock 파일을 생성하고 업데이트한다는 것이다.<br />
  npm-shrinkwrap.json이 존재하는 경우에만 업데이트된다. <br />
  npm v5.0은 lock.json 파일로 명명된 새로운 패키지와 함께 제공되며 npm-lapwrap 시스템을 완전히 폐기했다. <br />
  이것은 설치 과정과 성능을 효율적으로 향상시켰지만, 아직 YARN의 속도 수준에는 도달하지 못 했다.

  [출처](https://developer0809.tistory.com/128)

- yarn command

  npm command보다 훨씬 단순하다.

  ```
  yarn help
  yarn init
  yarn install
  yarn add
  yarn up
  yarn remove
  ```

  npm에 있는 command를 그대로 써도 되는데 굳이 이렇게 조금 바꾼 느낌이 좀 들긴해서 좀 유치한 느낌(!)이 들수도 있지만, 그럼에도 불구하고 속도가 빠르고 굉장히 최적화가 잘 되어있기 때문에 npm의 일부 기능만 최적화해서 쓰겠다고 하면 Yarn을 굉장히 많이 쓰이고 있다.

<br />

  페이스북에서 만든 것이기 때문에 react와 관련된 라이브러리나 혹은 react계열에선 거의 대부분이 yarn베이스로 문서를 만들고 설치하고 있기 때문에 yarn이 많이 쓰이는 측면도 있어 보인다.
